<div class='all-cards-container'>
  <div class='header'>
    <h1 class='header-title'>Cartes de la Terre 🌍</h1>
    <div class='buttons-container'>
      <div *ngIf="isLoading" class="loading" style="color: white; text-align: center; font-size: 16px; margin-right: 10px;">
        Préparation du téléchargement... {{ Math.round(progress) }}%
      </div>
      <button class='download-btn' (click)="downloadAllCards()" [disabled]="isLoading">
        Télécharger 📥
      </button>
      <button class='filter-btn' (click)="toggleFilters()">
        Filtres {{ showFilters ? '▲' : '▼' }}
      </button>
    </div>
  </div>
  
  <div class='filters-container' *ngIf="showFilters">
    <div class='filters-section'>
      <h3>Types de cartes</h3>
      <div class='filter-group'>
        <label *ngFor="let filter of typeFilters" class='filter-item'>
          <input 
            type="checkbox" 
            [(ngModel)]="filter.checked" 
            (change)="applyFilters()"
          />
          <span>{{ filter.label }}</span>
        </label>
      </div>
    </div>
    
    <div class='filters-section'>
      <h3>Continents</h3>
      <div class='filter-group'>
        <label *ngFor="let filter of continentFilters" class='filter-item'>
          <input 
            type="checkbox" 
            [(ngModel)]="filter.checked" 
            (change)="applyFilters()"
          />
          <span>{{ filter.label }}</span>
        </label>
      </div>
    </div>
    
    <div class='filters-actions'>
      <button class='clear-filters-btn' (click)="clearAllFilters()">
        Effacer tous les filtres
      </button>
    </div>
  </div>
  
  <div class='cards-grid'>
    <app-card 
      *ngFor="let card of shuffledCards" 
      [card]="card" 
      [id]="'card-' + card.nom"
      class="card-box">
    </app-card>
  </div>
</div>