<div class='all-cards-container'>
  <div class='header'>
    <h1 class='header-title'>Geo Cards</h1>
    <div class='buttons-container'>
      <div *ngIf="isLoading" class="loading" style="color: white; text-align: center; font-size: 16px; margin-right: 10px;">
        Préparation du téléchargement... {{ Math.round(progress) }}%
      </div>
      <button class='download-btn' (click)="downloadAllCards()" [disabled]="isLoading">
        <span class="btn-icon">📥</span>
        <span class="btn-text">Télécharger</span>
      </button>
      <button class='filter-btn' (click)="toggleFilters()">
        <span class="btn-icon">🔧</span>
        <span class="btn-text">Filtres</span>
        <span class="btn-arrow">{{ showFilters ? '▲' : '▼' }}</span>
      </button>
    </div>
  </div>

  <!-- Search Bar - Always Visible -->
  <div class='search-section'>
    <div class='search-container'>
      <input 
        type="text" 
        class='search-input'
        placeholder="Rechercher une carte (nom, lieu, type, continent...)"
        [(ngModel)]="searchTerm" 
        (input)="applyFilters()"
      />
      <span class='search-icon'>🔍</span>
    </div>
  </div>
  
  <div class='filters-container' *ngIf="showFilters">
    <div class='filters-section'>
      <h3>Types de cartes</h3>
      <div class='filter-group'>
        <label *ngFor="let filter of typeFilters" class='filter-item'>
          <input 
            type="checkbox" 
            [(ngModel)]="filter.checked" 
            (change)="applyFilters()"
          />
          <span>{{ filter.label }}</span>
        </label>
      </div>
    </div>
    
    <div class='filters-section'>
      <h3>Continents</h3>
      <div class='filter-group'>
        <label *ngFor="let filter of continentFilters" class='filter-item'>
          <input 
            type="checkbox" 
            [(ngModel)]="filter.checked" 
            (change)="applyFilters()"
          />
          <span>{{ filter.label }}</span>
        </label>
      </div>
    </div>
    
    <div class='filters-actions'>
      <button class='clear-filters-btn' (click)="clearAllFilters()">
        Effacer tous les filtres
      </button>
    </div>
  </div>
  
  <div class='cards-grid'>
    <app-card 
      *ngFor="let card of shuffledCards" 
      [card]="card" 
      [id]="'card-' + card.nom"
      class="card-box">
    </app-card>
  </div>
</div>